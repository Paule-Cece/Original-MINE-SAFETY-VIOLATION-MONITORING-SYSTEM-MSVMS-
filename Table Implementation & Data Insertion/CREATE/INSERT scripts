-- 1. Table Creation

-- MINE_SITE Table
CREATE TABLE MINE_SITE (
    SiteID NUMBER PRIMARY KEY,
    SiteName VARCHAR2(100) NOT NULL,
    Location VARCHAR2(200),
    Supervisor VARCHAR2(100) NOT NULL
);

-- EMPLOYEE Table
CREATE TABLE EMPLOYEE (
    EmployeeID NUMBER PRIMARY KEY,
    Name VARCHAR2(100) NOT NULL,
    Position VARCHAR2(50),
    SiteID NUMBER NOT NULL,
    CONSTRAINT fk_employee_site FOREIGN KEY (SiteID) REFERENCES MINE_SITE(SiteID)
);

-- VIOLATION Table
CREATE TABLE VIOLATION (
    ViolationID NUMBER PRIMARY KEY,
    EmployeeID NUMBER NOT NULL,
    ViolationDate DATE NOT NULL,
    Type VARCHAR2(50),
    Severity VARCHAR2(20) CHECK (Severity IN ('Low','Medium','High','Critical')),
    Description VARCHAR2(400),
    CONSTRAINT fk_violation_employee FOREIGN KEY (EmployeeID) REFERENCES EMPLOYEE(EmployeeID)
);

-- INSPECTION Table
CREATE TABLE INSPECTION (
    InspectionID NUMBER PRIMARY KEY,
    SiteID NUMBER NOT NULL,
    InspectionDate DATE NOT NULL,
    Inspector VARCHAR2(100),
    Remarks VARCHAR2(400),
    CONSTRAINT fk_inspection_site FOREIGN KEY (SiteID) REFERENCES MINE_SITE(SiteID)
);

-- RECOMMENDATION Table
CREATE TABLE RECOMMENDATION (
    RecommendationID NUMBER PRIMARY KEY,
    ViolationID NUMBER NOT NULL,
    RecommendationDate DATE DEFAULT SYSDATE,
    Action VARCHAR2(400),
    Status VARCHAR2(20) CHECK (Status IN ('Pending','Completed','In Progress')),
    CONSTRAINT fk_recommendation_violation FOREIGN KEY (ViolationID) REFERENCES VIOLATION(ViolationID)
);
